# Copyright 2025 Canonical Ltd.
# See LICENSE file for licensing details.
# This file configures Charmcraft.
# See https://canonical-charmcraft.readthedocs-hosted.com/stable/howto/manage-charmcraft/ 
# for guidance.

type: charm
subordinate: true
name: aproxy
title: Aproxy Subordinate Charm
summary: A subordinate charm that deploys the aproxy application.
links:
  documentation: https://discourse.charmhub.io
  issues: https://github.com/canonical/aproxy-operator/issues
  source: https://github.com/canonical/aproxy-operator
  contact: https://launchpad.net/~canonical-is-devops

description: |
  A subordinate charm built on top of the aproxy application.

  A paragraph of one to three short sentences, that describe what the charm does.

  A third paragraph that explains what need the charm meets.

  Finally, a paragraph that describes whom the charm is useful for.

bases:
  - build-on:
    - name: ubuntu
      channel: "24.04"
    run-on:
    - name: ubuntu
      channel: "24.04"

requires:
  aproxy:
    interface: aproxy
    scope: container

# See https://documentation.ubuntu.com/charmcraft/stable/reference/files/charmcraft-yaml-file/
# for guidance.
config:
  options:
    proxy-address:
      description: Configures the target proxy IP address for traffic forwarding.
      type: string
    no-proxy:
      description: Comma-separated list of addresses that should bypass the proxy.
      default: "127.0.0.1,localhost"
      type: string
    intercept-ports:
      description: |
        Comma-separated list of ports to intercept and forward through the proxy.

        Support ranges (ex: "1024-35655"), some semantic working “ALL”, or list of ranges (ex: "80-90,1024-2048")
      default: "80,443"
      type: string
